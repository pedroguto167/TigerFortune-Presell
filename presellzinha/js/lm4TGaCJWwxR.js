var pms_payment_buttons,$pms_auto_renew_field,$pms_checked_subscription,$pms_checked_paygate,$pms_gateways_not_available,pms_payment_button_loading_placeholder_text,$pms_form,is_pb_email_confirmation_on,$pms_section_billing_details;jQuery((function(e){function i(e,i){var s=i.split("?")[0],n=[],t=-1!==i.indexOf("?")?i.split("?")[1]:"";if(""!==t){for(var p=(n=t.split("&")).length-1;p>=0;p-=1)n[p].split("=")[0]===e&&n.splice(p,1);s=s+"?"+n.join("&")}return""==s.split("?")[1]&&(s=s.split("?")[0]),s}window.history.replaceState&&(currentURL=window.location.href,currentURL=i("pmsscscd",currentURL),currentURL=i("pmsscsmsg",currentURL),currentURL=i("pms_gateway_payment_action",currentURL),currentURL=i("pms_gateway_payment_id",currentURL),currentURL!=window.location.href&&window.history.replaceState(null,null,currentURL)),pms_payment_buttons="input[name=pms_register], ",pms_payment_buttons+="input[name=pms_new_subscription], ",pms_payment_buttons+="input[name=pms_change_subscription], ",pms_payment_buttons+="input[name=pms_upgrade_subscription], ",pms_payment_buttons+="input[name=pms_renew_subscription], ",pms_payment_buttons+="input[name=pms_confirm_retry_payment_subscription], ",pms_payment_buttons+="input[name=pms_update_payment_method], ",pms_payment_buttons+='#pms-paypal-express-confirmation-form input[type="submit"], ',pms_payment_buttons+=".wppb-register-user input[name=register]";var s="input[name=subscription_plans]",n="input.pms_pay_gate",t=e('input[name="pms_default_recurring"]').val();$pms_section_billing_details=e(".pms-section-billing-details"),is_pb_email_confirmation_on=$pms_section_billing_details.siblings(".pms-email-confirmation-payment-message").length>0,$pms_auto_renew_field=jQuery(".pms-subscription-plan-auto-renew"),$pms_checked_subscription=jQuery(s+"[type=radio]").length>0?jQuery(s+"[type=radio]:checked"):jQuery(s+"[type=hidden]"),$pms_checked_paygate=jQuery(n+"[type=radio]").length>0?jQuery(n+"[type=radio]:checked"):jQuery(n+"[type=hidden]"),$pms_gateways_not_available=jQuery("#pms-gateways-not-available"),pms_payment_button_loading_placeholder_text=e("#pms-submit-button-loading-placeholder-text").text(),jQuery(document).ready((function(){function i(){1==$pms_checked_subscription.data("recurring")&&"undefined"!=$pms_checked_paygate.data("recurring")?$pms_auto_renew_field.show():$pms_auto_renew_field.hide(),0==$pms_checked_subscription.data("recurring")&&1==t&&$pms_auto_renew_field.show(),("on"==$pms_checked_subscription.data("fixed_membership")&&"on"!=$pms_checked_subscription.data("allow_renew")||2==$pms_checked_subscription.data("recurring")||3==$pms_checked_subscription.data("recurring"))&&$pms_auto_renew_field.hide(),("on"!=$pms_checked_subscription.data("fixed_membership")&&0==$pms_checked_subscription.data("duration")||0==$pms_checked_subscription.data("price"))&&(void 0===$pms_checked_subscription.data("discountedPrice")||void 0!==$pms_checked_subscription.data("isFullDiscount")&&1==$pms_checked_subscription.data("isFullDiscount")&&1==$pms_checked_subscription.data("discountRecurringPayments"))&&$pms_auto_renew_field.hide(),"undefined"!=$pms_checked_subscription.data("recurring")&&3!=$pms_checked_subscription.data("recurring")&&2!=$pms_checked_subscription.data("recurring")&&("on"!=$pms_checked_subscription.data("fixed_membership")||"on"==$pms_checked_subscription.data("fixed_membership")&&"on"==$pms_checked_subscription.data("allow_renew"))&&void 0!==$pms_checked_subscription.data("prorated_discount")&&$pms_checked_subscription.data("prorated_discount")>0&&$pms_auto_renew_field.show()}function p(){if(e("#pms-paygates-wrapper").show(),e(n).removeAttr("disabled"),e(n).closest("label").show(),e.pms_plan_has_trial()&&(e(n+":not([data-trial])").attr("disabled",!0),e(n+":not([data-trial])").closest("label").hide()),e.pms_plan_has_signup_fee()&&(e(n+":not([data-sign_up_fee])").attr("disabled",!0),e(n+":not([data-sign_up_fee])").closest("label").hide()),2==$pms_checked_subscription.data("recurring")?(e(n+":not([data-recurring])").attr("disabled",!0),e(n+":not([data-recurring])").closest("label").hide()):1==$pms_checked_subscription.data("recurring")?$pms_auto_renew_field.find("input[type=checkbox]").is(":checked")&&(e(n+":not([data-recurring])").attr("disabled",!0),e(n+":not([data-recurring])").closest("label").hide()):$pms_checked_subscription.data("recurring")||(1==t?$pms_auto_renew_field.find("input[type=checkbox]").is(":checked")&&(e(n+":not([data-recurring])").attr("disabled",!0),e(n+":not([data-recurring])").closest("label").hide()):2==t&&(e(n+":not([data-recurring])").attr("disabled",!0),e(n+":not([data-recurring])").closest("label").hide())),0==e(n+":not([disabled]):checked").length&&e(n+":not([disabled])").first().trigger("click"),e(n).length>0&&(0==e(n+":not([disabled])").length?($pms_gateways_not_available.show(),e(".pms-credit-card-information").hide(),e(".pms-billing-details").hide(),0!=$pms_checked_subscription.data("price")&&0!=$pms_checked_subscription.length&&e(pms_payment_buttons).attr("disabled",!0).addClass("pms-submit-disabled")):($pms_gateways_not_available.hide(),e(n+':not([disabled]):checked[data-type="credit_card"]').length>0&&(e(".pms-credit-card-information").show(),e(".pms-billing-details").show()),0!=$pms_checked_subscription.length&&e(pms_payment_buttons).attr("disabled",!1).removeClass("pms-submit-disabled"))),0==$pms_checked_subscription.data("price")&&!e.pms_plan_has_signup_fee()){if(e.pms_plan_is_prorated()&&e.pms_checkout_is_recurring())return void(void 0!==$pms_form&&e.pms_show_payment_fields($pms_form));e("#pms-paygates-wrapper").hide(),e(n).attr("disabled",!0),e(n).closest("label").hide(),e(".pms-credit-card-information").hide(),e(".pms-billing-details").hide()}}function a(){e("#pms-change-subscription-form").length>0&&e('input[name="subscription_plans"]').each((function(i,s){3!=e(s).data("recurring")&&void 0!==e(s).data("prorated_discount")&&0!=e(s).data("prorated_discount")&&((2==e(s).data("recurring")||2==t||e('input[name="pms_recurring"]',$pms_auto_renew_field).prop("checked"))&&e(".pms-subscription-plan-price__recurring",e(s).parent())?e(".pms-subscription-plan-price__recurring",e(s).parent()).show():e(".pms-subscription-plan-price__recurring",e(s).parent()).hide())}))}function r(){$pms_section_billing_details.length>0&&$pms_checked_subscription.length>0&&!is_pb_email_confirmation_on&&(0!=$pms_checked_subscription.data("price")||e.pms_plan_has_signup_fee($pms_checked_subscription))&&e(".pms-billing-details").show()}function o(i){var s=jQuery('input[type="submit"], button[type="submit"]',jQuery(this)).not("#pms-apply-discount").not('input[name="pms_redirect_back"]')[0];if(e(s).hasClass("pms-submit-disabled"))return!1;e(s).data("original-value",e(s).val()),pms_payment_button_loading_placeholder_text.length>0&&(e(s).addClass("pms-submit-disabled").val(pms_payment_button_loading_placeholder_text),e(s).is("button")&&e(s).text(pms_payment_button_loading_placeholder_text))}if(e(document).on("click",n,(function(){e(this).is(":checked")&&($pms_checked_paygate=e(this)),"credit_card"==$pms_checked_paygate.data("type")?e(".pms-credit-card-information").show():e(".pms-credit-card-information").hide(),r()})),e(document).on("click",s+"[type=radio], "+s+'[type="hidden"]',(function(){e(this).is(":checked")&&($pms_checked_subscription=e(this)),void 0===$pms_form&&($pms_form=e(this).closest("form")),i(),p(),r()})),e(document).on("change",".pms_pwyw_pricing",r),e(document).on("keyup",".pms_pwyw_pricing",r),jQuery(document).on("submit",".pms-form",o),jQuery(".wppb-register-user").length>0&&jQuery(".wppb-register-user .wppb-subscription-plans").length>0&&jQuery(document).on("submit",".wppb-register-user",o),$pms_auto_renew_field.click((function(){i(),p(),a()})),i(),p(),a(),r(),e("#pms-paygates-inner").css("visibility","visible"),jQuery(document).on("elementor/popup/show",(function(){e(".pms-form",e(".elementor-popup-modal")).length>0&&(i(),p(),a(),r(),e("#pms-paygates-inner").css("visibility","visible"))})),0!=e(".wppb-register-user").length&&0!=e(".wppb-subscription-plans").length){function c(i=""){if(!e("#pms-paygates-wrapper").is(":hidden")){if(""!=i){var s=i.target;if(void 0===e(s).attr("conditional-name")||"subscription_plans"!=e(s).attr("conditional-name"))return}var t=!1;e(".wppb-subscription-plans").each((function(i,s){if(e(s).is(":visible")){var n=!0;return e('.pms-subscription-plan input[name="subscription_plans"]',e(s)).each((function(i,s){if(e(s).data("price")&&e(s).data("price")>0)return n=!1,!1})),t=!n,!1}})),!1===t?(e("#pms-paygates-wrapper").hide(),e(n).attr("disabled",!0),e(n).closest("label").hide(),e(".pms-credit-card-information").hide(),e(".pms-billing-details").hide(),e(".pms-price-breakdown__holder").hide()):d()}}function d(){jQuery("#wppb-register-user").length>0&&jQuery(".wppb-subscription-plans").length>1&&jQuery(".wppb-subscription-plans").each((function(){jQuery(this).is(":visible")&&jQuery(this).find("input[name='subscription_plans']").each((function(e,i){void 0!==jQuery(i).data("default-selected")&&1==jQuery(i).data("default-selected")&&(jQuery(i).prop("checked","checked"),jQuery(i).trigger("click"))}))}))}d(),c(),e(document).on("wppbRemoveRequiredAttributeEvent",c),e(document).on("wppbAddRequiredAttributeEvent",(function(i=""){if(""!=i){var s=i.target;if(void 0===e(s).attr("conditional-name")||"subscription_plans"!=e(s).attr("conditional-name"))return}var t=!1;e(".wppb-subscription-plans").each((function(i,s){if(e(s).is(":visible")){var n=!0;return e(".pms-subscription-plan",e(s)).each((function(i,s){if(e("input",e(s)).data("price")&&e("input",e(s)).data("price")>0)return n=!1,!1})),t=!n,!1}})),!1===t?(e("#pms-paygates-wrapper").hide(),e(n).attr("disabled",!0),e(n).closest("label").hide(),e(".pms-credit-card-information").hide(),e(".pms-billing-details").hide(),e(".pms-price-breakdown__holder").hide()):(e("#pms-paygates-wrapper").show(),e(n).removeAttr("disabled"),e(n).closest("label").show(),e(".pms-credit-card-information").show(),e(".pms-billing-details").show(),e(".pms-price-breakdown__holder").show())}))}e("#pms-change-subscription-form").length>0&&($pms_checked_subscription.closest(".pms-upgrade__group").hasClass("pms-upgrade__group--upgrade")?(e('#pms-change-subscription-form input[name="pms_change_subscription"]').val(e('#pms-change-subscription-form input[name="pms_button_name_upgrade"]').val()),e('#pms-change-subscription-form input[name="form_action"]').val(e('#pms-change-subscription-form input[data-name="upgrade_subscription"]').val())):$pms_checked_subscription.closest(".pms-upgrade__group").hasClass("pms-upgrade__group--downgrade")&&(e('#pms-change-subscription-form input[name="pms_change_subscription"]').val(e('#pms-change-subscription-form input[name="pms_button_name_downgrade"]').val()),e('#pms-change-subscription-form input[name="form_action"]').val(e('#pms-change-subscription-form input[data-name="downgrade_subscription"]').val())),e("#pms-change-subscription-form .pms-upgrade__group--upgrade .pms-subscription-plan input").on("click",(function(){e('#pms-change-subscription-form input[name="pms_change_subscription"]').val(e('#pms-change-subscription-form input[name="pms_button_name_upgrade"]').val()),e('#pms-change-subscription-form input[name="form_action"]').val(e('#pms-change-subscription-form input[data-name="upgrade_subscription"]').val())})),e("#pms-change-subscription-form .pms-upgrade__group--downgrade .pms-subscription-plan input").on("click",(function(){e('#pms-change-subscription-form input[name="pms_change_subscription"]').val(e('#pms-change-subscription-form input[name="pms_button_name_downgrade"]').val()),e('#pms-change-subscription-form input[name="form_action"]').val(e('#pms-change-subscription-form input[data-name="downgrade_subscription"]').val())})),e("#pms-change-subscription-form .pms-upgrade__group--change .pms-subscription-plan input").on("click",(function(){e('#pms-change-subscription-form input[name="pms_change_subscription"]').val(e('#pms-change-subscription-form input[name="pms_button_name_change"]').val()),e('#pms-change-subscription-form input[name="form_action"]').val("")})))})),e.pms_add_field_error=function(i,s){if(""==i||"undefined"==i||""==s||"undefined"==s)return!1;$field=e("[name="+s+"]"),$field_wrapper=$field.closest(".pms-field"),i="<p>"+i+"</p>",$field_wrapper.find(".pms_field-errors-wrapper").length>0?$field_wrapper.find(".pms_field-errors-wrapper").html(i):$field_wrapper.append('<div class="pms_field-errors-wrapper pms-is-js">'+i+"</div>")},e.pms_add_general_error=function(i){if(""==i||"undefined"==i)return!1;e(".pms-form").prepend('<div class="pms_field-errors-wrapper pms-is-js"><p>'+i+"</p></div>")},e.pms_add_subscription_plans_error=function(i){if(""==i||"undefined"==i)return!1;e('<div class="pms_field-errors-wrapper pms-is-js"><p>'+i+"</p></div>").insertBefore("#pms-paygates-wrapper")},e.pms_clean_field_errors=function(){e(".pms_field-errors-wrapper.pms-is-js").remove()},e.pms_plan_has_trial=function(e=null){return null==e&&(e=$pms_checked_subscription),void 0!==e.data("trial")&&"0"!=e.data("trial")},e.pms_plan_has_signup_fee=function(e=null){return null==e&&(e=$pms_checked_subscription),void 0!==e.data("sign_up_fee")&&"0"!=e.data("sign_up_fee")},e.pms_plan_is_prorated=function(i=null){return e("#pms-change-subscription-form").length>0&&(null==i&&(i=$pms_checked_subscription),void 0!==i.data("prorated_discount")&&i.data("prorated_discount")>0)},e.pms_checkout_is_recurring=function(i=null){return null==i&&(i=$pms_checked_subscription),!("2"!=t&&!e('input[name="pms_recurring"]',$pms_auto_renew_field).prop("checked")&&2!=i.data("recurring")||3==i.data("recurring"))},e.pms_hide_payment_fields=function(i){void 0!==i&&(void 0===i.pms_paygates_wrapper&&(i.pms_paygates_wrapper=i.find("#pms-paygates-wrapper").clone()),i.find("#pms-paygates-wrapper").replaceWith('<span id="pms-paygates-wrapper">'),i.find(".pms-credit-card-information").hide(),void 0===i.pms_billing_details&&("undefined"!=typeof PMS_ChosenStrings&&null!=e.fn.chosen&&(i.find("#pms_billing_country").chosen("destroy"),i.find("#pms_billing_state").chosen("destroy")),i.pms_billing_details=i.find(".pms-billing-details").clone()),i.find(".pms-billing-details").replaceWith('<span class="pms-billing-details">'))},e.pms_show_payment_fields=function(i){void 0!==i&&(void 0!==i.pms_paygates_wrapper&&i.find("#pms-paygates-wrapper").replaceWith(i.pms_paygates_wrapper),"unedfined"!=typeof $pms_checked_paygate&&"credit_card"==$pms_checked_paygate.data("type")&&i.find(".pms-credit-card-information").show(),void 0!==i.pms_billing_details&&(i.find(".pms-billing-details").replaceWith(i.pms_billing_details),"undefined"!=typeof PMS_ChosenStrings&&null!=e.fn.chosen&&(i.find("#pms_billing_country").chosen(PMS_ChosenStrings),e("#pms_billing_state option").length>0&&i.find("#pms_billing_state").chosen(PMS_ChosenStrings))))},jQuery("#pms-delete-account").on("click",(function(e){e.preventDefault(),"DELETE"===prompt(pmsGdpr.delete_text)?window.location.replace(pmsGdpr.delete_url):alert(pmsGdpr.delete_error_text)}))})),jQuery((function(e){e(document).ready((function(){if(!e('.pms-subscription-plan input[type=radio][data-price="0"]').is(":checked")&&"0"!=e(".pms-subscription-plan input[type=hidden]").attr("data-price")&&0!=e(".pms-subscription-plan input[type=radio]").prop("checked")||e.pms_plan_has_signup_fee()||e(".pms-email-confirmation-payment-message").hide(),e(".pms-subscription-plan input[type=radio]").length>0){var i=!1;e(".pms-subscription-plan input[type=radio]").each((function(){(0!=e(this).data("price")||e.pms_plan_has_signup_fee(e(this)))&&(i=!0)})),i||e(".pms-email-confirmation-payment-message").hide()}e(".pms-subscription-plan input[type=radio]").click((function(){e('.pms-subscription-plan input[type=radio][data-price="0"]').is(":checked")&&!e.pms_plan_has_signup_fee(e(this))?e(".pms-email-confirmation-payment-message").hide():e(".pms-email-confirmation-payment-message").show()})),e(".wppb-edit-user input[required]").on("invalid",(function(i){var s;s=e('.wppb-edit-user .wppb-subscription-plans input[type="submit"]').first(),setTimeout((function(){s.attr("disabled",!1).removeClass("pms-submit-disabled").val(s.data("original-value")).blur(),e(s).is("button")&&e(s).text(s.data("original-value"))}),1)}))}))})),jQuery((function(e){function i(){var i=e(".pms-billing-details #pms_billing_country").val();if(PMS_States[i]){for(var s in"undefined"!=typeof PMS_ChosenStrings&&null!=e.fn.chosen&&e(".pms-billing-state__select").chosen("destroy"),e(".pms-billing-state__select option").remove(),e(".pms-billing-state__select").append('<option value=""></option>'),PMS_States[i])PMS_States[i].hasOwnProperty(s)&&e(".pms-billing-state__select").append('<option value="'+s+'">'+PMS_States[i][s]+"</option>");var n=e(".pms-billing-state__input").val();""!=n&&e(".pms-billing-state__select").val(n),e(".pms-billing-state__input").removeAttr("name").removeAttr("id").hide(),e(".pms-billing-state__select").attr("name","pms_billing_state").attr("id","pms_billing_state").show(),"undefined"!=typeof PMS_ChosenStrings&&null!=e.fn.chosen&&e(".pms-billing-state__select").chosen(PMS_ChosenStrings)}else"undefined"!=typeof PMS_ChosenStrings&&null!=e.fn.chosen&&e(".pms-billing-state__select").chosen("destroy"),e(".pms-billing-state__select").removeAttr("name").removeAttr("id").hide(),e(".pms-billing-state__input").attr("name","pms_billing_state").attr("id","pms_billing_state").show()}e(document).ready((function(){"undefined"!=typeof PMS_States&&PMS_States&&(i(),e(document).on("change","#pms_billing_country",(function(){i()})),"undefined"!=typeof PMS_ChosenStrings&&null!=e.fn.chosen&&(e("#pms_billing_country").chosen(PMS_ChosenStrings),e("#pms_billing_state option").length>0&&e("#pms_billing_state").chosen(PMS_ChosenStrings)),e("input[name=pms_billing_email]").each((function(){""!=e(this).val()&&e(this).addClass("pms-has-value")})))})),e(document).on("keyup","#pms_user_email, .wppb-form-field input[name=email]",(function(){return 0!=e(this).closest("form").find("[name=pms_billing_email]").length&&(!e(this).closest("form").find("[name=pms_billing_email]").hasClass("pms-has-value")&&void e(this).closest("form").find("[name=pms_billing_email]").val(e(this).val()))}))}));